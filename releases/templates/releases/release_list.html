{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="container mt-5">
  <h1 class="mb-4">ðŸŽµ Releases</h1>

  {% for post in posts %}
<div class="card mb-4 shadow-sm">
  <div class="card-body">
    <h3 class="card-title">{{ post.title }}</h3>
    <p class="card-text">{{ post.body }}</p>

    {% if post.tags %}
      <p class="text-muted"><strong>Tags:</strong> {{ post.tags }}</p>
    {% endif %}

    {% if post.album_art %}
      <img src="{{ post.album_art.url }}" alt="{{ post.title }} album art" class="img-fluid mb-3" style="max-height: 300px;">
    {% endif %}

    {% if post.track_preview %}
      <audio controls style="width: 100%;">
        <source src="{{ post.track_preview.url }}" type="audio/{{ post.track_preview.url|slice:"-3" }}">
        Your browser does not support the audio element.
      </audio>
    {% endif %}

    <p class="mt-3 text-muted"><strong>Released:</strong> {{ post.release_datetime|date:"F j, Y" }}</p>
  </div>
</div>

  {% empty %}
    <p>No releases yet. Check back soon!</p>
  {% endfor %}
</div>

{% endblock %}
